[gd_scene load_steps=5 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]
[ext_resource path="res://Themes/Default.theme" type="Theme" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Control


onready var EnableBanner : Button = $CenterContainer/VBoxContainer/Banner/EnableBanner
onready var DisableBanner : Button = $CenterContainer/VBoxContainer/Banner/DisableBanner
onready var Interstitial : Button = $CenterContainer/VBoxContainer/Interstitial
onready var Rewarded : Button = $CenterContainer/VBoxContainer/Rewarded
onready var EnableNative : Button = $CenterContainer/VBoxContainer/UnifiedNative/EnableUnifiedNative
onready var DisableNative : Button = $CenterContainer/VBoxContainer/UnifiedNative/DisableUnifiedNative

onready var Advice : Button = $Advice

func _ready():
	if OS.get_name() == \"Android\" or OS.get_name() == \"iOS\":
		AdMob.init()
		EnableBanner.disabled = false
		EnableNative.disabled = false
		AdMob.load_interstitial()
		AdMob.load_rewarded()
		AdMob.connect(\"banner_destroyed\", self, \"_on_AdMob_banner_destroyed\")
		AdMob.connect(\"interstitial_loaded\", self, \"_on_AdMob_interstitial_loaded\")
		AdMob.connect(\"interstitial_closed\", self, \"_on_AdMob_interstitial_closed\")
		AdMob.connect(\"rewarded_ad_closed\", self, \"_on_AdMob_rewarded_ad_closed\")
		AdMob.connect(\"rewarded_ad_loaded\", self, \"_on_AdMob_rewarded_ad_loaded\")
		AdMob.connect(\"rewarded_user_earned_rewarded\", self, \"_on_AdMob_rewarded_user_earned_rewarded\")
		AdMob.connect(\"unified_native_destroyed\", self, \"_on_AdMob_unified_native_destroyed\")
	else:
		Advice.text = \"Module only works on Android or iOS devices!\"
	
	
func _on_AdMob_interstitial_loaded():
	Interstitial.disabled = false

func _on_Interstitial_pressed():
	AdMob.show_interstitial()
	Interstitial.disabled = true
	
func _on_AdMob_interstitial_closed():
	AdMob.load_interstitial()
	

func _on_AdMob_banner_destroyed():
	DisableBanner.disabled = true
	EnableBanner.disabled = false
	EnableNative.disabled = false

func _on_AdMob_unified_native_destroyed():
	DisableNative.disabled = true
	EnableBanner.disabled = false
	EnableNative.disabled = false

func _on_EnableBanner_pressed():
	DisableBanner.disabled = false
	EnableBanner.disabled = true
	EnableNative.disabled = true
	AdMob.load_banner()

func _on_DisableBanner_pressed():
	DisableBanner.disabled = true
	EnableBanner.disabled = false
	EnableNative.disabled = false
	AdMob.destroy_banner()


func _on_Rewarded_pressed():
	AdMob.show_rewarded()
	Rewarded.disabled = true
	
func _on_AdMob_rewarded_ad_closed():
	AdMob.load_rewarded()

func _on_AdMob_rewarded_ad_loaded():
	Rewarded.disabled = false
	
func _on_AdMob_rewarded_user_earned_rewarded(currency : String, amount : int):
	Advice.text = \"EARNED \" + currency + \" with amount: \" + str(amount)


func _on_EnableUnifiedNative_pressed():
	DisableNative.disabled = false
	EnableNative.disabled = true
	EnableBanner.disabled = true
	AdMob.load_unified_native($UnifiedNative)

func _on_DisableUnifiedNative_pressed():
	DisableNative.disabled = true
	EnableNative.disabled = false
	EnableBanner.disabled = false
	AdMob.destroy_unified_native()


"

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 0, 0, 0, 1 )

[node name="Control" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = SubResource( 1 )

[node name="AdMob" type="TextureRect" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -256.0
margin_top = -256.0
margin_right = 256.0
margin_bottom = 256.0
texture = ExtResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="Advice" type="Label" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -358.834
margin_top = -312.0
margin_right = 361.166
margin_bottom = -278.0
theme = ExtResource( 2 )
custom_styles/normal = SubResource( 2 )
text = "ADVICE LABEL"
align = 1
valign = 1
autowrap = true

[node name="CenterContainer" type="CenterContainer" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -342.5
margin_top = -108.0
margin_right = 342.5
margin_bottom = 108.0

[node name="VBoxContainer" type="VBoxContainer" parent="CenterContainer"]
margin_top = 22.0
margin_right = 685.0
margin_bottom = 194.0
alignment = 1

[node name="Banner" type="HBoxContainer" parent="CenterContainer/VBoxContainer"]
margin_right = 685.0
margin_bottom = 40.0
alignment = 1

[node name="EnableBanner" type="Button" parent="CenterContainer/VBoxContainer/Banner"]
margin_right = 334.0
margin_bottom = 40.0
theme = ExtResource( 2 )
disabled = true
text = "enable banner"

[node name="DisableBanner" type="Button" parent="CenterContainer/VBoxContainer/Banner"]
margin_left = 338.0
margin_right = 685.0
margin_bottom = 40.0
theme = ExtResource( 2 )
disabled = true
text = "banner disable"

[node name="Interstitial" type="Button" parent="CenterContainer/VBoxContainer"]
margin_top = 44.0
margin_right = 685.0
margin_bottom = 84.0
theme = ExtResource( 2 )
disabled = true
text = "INTERSTITIAL"

[node name="Rewarded" type="Button" parent="CenterContainer/VBoxContainer"]
margin_top = 88.0
margin_right = 685.0
margin_bottom = 128.0
theme = ExtResource( 2 )
disabled = true
text = "Rewarded"

[node name="UnifiedNative" type="HBoxContainer" parent="CenterContainer/VBoxContainer"]
margin_top = 132.0
margin_right = 685.0
margin_bottom = 172.0
alignment = 1

[node name="EnableUnifiedNative" type="Button" parent="CenterContainer/VBoxContainer/UnifiedNative"]
margin_right = 325.0
margin_bottom = 40.0
theme = ExtResource( 2 )
disabled = true
text = "ENABLE UNFIED"

[node name="DisableUnifiedNative" type="Button" parent="CenterContainer/VBoxContainer/UnifiedNative"]
margin_left = 329.0
margin_right = 685.0
margin_bottom = 40.0
theme = ExtResource( 2 )
disabled = true
text = "UNIFIED disable"

[node name="UnifiedNative" type="Panel" parent="."]
anchor_right = 1.0
margin_bottom = 150.0
[connection signal="pressed" from="CenterContainer/VBoxContainer/Banner/EnableBanner" to="." method="_on_EnableBanner_pressed"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/Banner/DisableBanner" to="." method="_on_DisableBanner_pressed"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/Interstitial" to="." method="_on_Interstitial_pressed"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/Rewarded" to="." method="_on_Rewarded_pressed"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/UnifiedNative/EnableUnifiedNative" to="." method="_on_EnableUnifiedNative_pressed"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/UnifiedNative/DisableUnifiedNative" to="." method="_on_DisableUnifiedNative_pressed"]
